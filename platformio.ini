[env:esp32-lora-sensor]
platform = espressif32 @ ^6.0.0
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200

build_flags =
    -D CPU_FREQ_MHZ=80        ; Power optimization
    -D BATTERY_POWERED
    -D OLED_ENABLED=1
    -D FIRMWARE_VERSION_MAJOR=2
    -D FIRMWARE_VERSION_MINOR=0
    -D FIRMWARE_VERSION_PATCH=0

lib_deps =
    jgromes/RadioLib @ 6.6.0
    adafruit/Adafruit BME280 Library @ 2.2.4
    adafruit/Adafruit Unified Sensor @ 1.1.14
    olikraus/U8g2 @ 2.35.9
    bblanchon/ArduinoJson @ 7.0.4

upload_speed = 921600
monitor_filters = esp32_exception_decoder

; Filesystem for SPIFFS configuration
board_build.filesystem = littlefs

[env:test-bme280]
platform = espressif32 @ ^6.0.0
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200

build_flags =
    -D CPU_FREQ_MHZ=80

lib_deps =
    adafruit/Adafruit BME280 Library @ 2.2.4
    adafruit/Adafruit Unified Sensor @ 1.1.14

upload_speed = 921600
monitor_filters = esp32_exception_decoder

; Use test file instead of main.cpp
build_src_filter = +<*> -<main.cpp> +<../test_bme280.cpp>

[env:test-sensor-manager]
platform = espressif32 @ ^6.0.0
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200

build_flags =
    -D CPU_FREQ_MHZ=80

lib_deps =
    adafruit/Adafruit BME280 Library @ 2.2.4
    adafruit/Adafruit Unified Sensor @ 1.1.14

upload_speed = 921600
monitor_filters = esp32_exception_decoder

; Filesystem for baseline storage
board_build.filesystem = littlefs

; Use test file and include sensor_manager
build_src_filter = +<*> -<main.cpp> +<../test_sensor_manager.cpp>

[env:test-config-manager]
platform = espressif32 @ ^6.0.0
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200

build_flags =
    -D CPU_FREQ_MHZ=80

lib_deps =
    adafruit/Adafruit BME280 Library @ 2.2.4
    adafruit/Adafruit Unified Sensor @ 1.1.14

upload_speed = 921600
monitor_filters = esp32_exception_decoder

; Filesystem for configuration files
board_build.filesystem = littlefs

; Use test file and include config_manager
build_src_filter = +<*> -<main.cpp> -<sensor_manager.cpp> +<../test_config_manager.cpp>

[env:test-lora-comm]
platform = espressif32 @ ^6.0.0
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200

build_flags =
    -D CPU_FREQ_MHZ=80

lib_deps =
    jgromes/RadioLib @ 6.6.0
    adafruit/Adafruit BME280 Library @ 2.2.4
    adafruit/Adafruit Unified Sensor @ 1.1.14

upload_speed = 921600
monitor_filters = esp32_exception_decoder

; Filesystem for baseline storage
board_build.filesystem = littlefs

; Use test file and include lora_comm + sensor_manager
build_src_filter = +<*> -<main.cpp> -<config_manager.cpp> +<../test_lora_comm.cpp>
